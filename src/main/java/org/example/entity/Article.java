package org.example.entity;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import software.amazon.awssdk.enhanced.dynamodb.extensions.annotations.DynamoDbAutoGeneratedUuid;
import software.amazon.awssdk.enhanced.dynamodb.mapper.annotations.DynamoDbAttribute;
import software.amazon.awssdk.enhanced.dynamodb.mapper.annotations.DynamoDbBean;
import software.amazon.awssdk.enhanced.dynamodb.mapper.annotations.DynamoDbPartitionKey;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

@Data
@AllArgsConstructor
@NoArgsConstructor
@DynamoDbBean
public class Article {

    private String articleId;
    private String headline;
    private String author;
    private String body;
    private String date;

    @DynamoDbAttribute("articleId")
    @DynamoDbPartitionKey
    @DynamoDbAutoGeneratedUuid
    public String getArticleId() {
        return articleId;
    }

    public void setArticleId(String articleId) {
        this.articleId = articleId;
    }

    @DynamoDbAttribute("headline")
    public String getHeadline() {
        return headline;
    }

    public void setHeadline(String headline) {
        this.headline = headline;
    }

    @DynamoDbAttribute("author")
    public String getAuthor() {
        return author;
    }

    public void setAuthor(String author) {
        this.author = author;
    }

    @DynamoDbAttribute("body")
    public String getBody() {
        return body;
    }

    public void setBody(String body) {
        this.body = body;
    }

    @DynamoDbAttribute("date")
    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    // Helper methods for LocalDateTime conversion
    public LocalDateTime getDateAsLocalDateTime() {
        return date != null ? LocalDateTime.parse(date, DateTimeFormatter.ISO_DATE_TIME) : null;
    }

    public void setDateAsLocalDateTime(LocalDateTime date) {
        this.date = date != null ? date.format(DateTimeFormatter.ISO_DATE_TIME) : null;
    }
}
